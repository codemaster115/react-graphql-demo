(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,n,t){e.exports=t(347)},181:function(e,n,t){},345:function(e,n,t){},347:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),c=t(9),o=t.n(c),l=(t(181),t(31)),u=t(48),i=t(33),s=t(32),m=t(34),d=t(45),p=t(29),b=t(348),f=t(53),h=t(42),y=t.n(h);function v(){var e=Object(f.a)(["\n  mutation deleteUsers($ids: [ID]!) {\n    deleteUsers(ids: $ids) {\n      id\n      accountHolderName\n      employeeName\n      bank {\n        id\n        name\n      }\n      branch {\n        id\n        name\n      }\n      accountType\n      accountNumber\n      employeeNumber\n      lastUpdated\n    }\n  }\n"]);return v=function(){return e},e}function E(){var e=Object(f.a)(["\n  mutation deleteUser($id: ID!) {\n    deleteUser(id: $id) {\n      id\n    }\n  }\n"]);return E=function(){return e},e}function O(){var e=Object(f.a)(["\n  mutation updateUser($id: ID!, $user: BankUserInput!) {\n    updateUser(id: $id, user: $user) {\n      id\n      accountHolderName\n      employeeName\n      bank {\n        id\n        name\n      }\n      branch {\n        id\n        name\n      }\n      accountType\n      accountNumber\n      employeeNumber\n      lastUpdated\n    }\n  }\n"]);return O=function(){return e},e}function N(){var e=Object(f.a)(["\n  mutation addUser($user: BankUserInput!) {\n    addUser(user: $user) {\n      id\n      accountHolderName\n      employeeName\n      bank {\n        id\n        name\n      }\n      branch {\n        id\n        name\n      }\n      accountType\n      accountNumber\n      employeeNumber\n      lastUpdated\n    }\n  }\n"]);return N=function(){return e},e}function j(){var e=Object(f.a)(["\n  {\n    users {\n      id\n      accountHolderName\n      employeeName\n      bank {\n        id\n        name\n      }\n      branch {\n        id\n        name\n      }\n      accountType\n      accountNumber\n      employeeNumber\n      lastUpdated\n    }\n  }\n"]);return j=function(){return e},e}function k(){var e=Object(f.a)(["\n  {\n    branches {\n      id\n      name\n    }\n  }\n"]);return k=function(){return e},e}function U(){var e=Object(f.a)(["\n  {\n    banks {\n      id\n      name\n    }\n  }\n"]);return U=function(){return e},e}var w=y()(U()),g=y()(k()),I=y()(j()),S=y()(N()),C=y()(O()),A=(y()(E()),y()(v())),H=function(e){function n(){return Object(l.a)(this,n),Object(i.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),n}(b.a),R=function(e){function n(){var e,t;Object(l.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(c)))).columns=[{title:"Account Holder Name",dataIndex:"accountHolderName",sorter:function(e,n){return e.accountHolderName<n.accountHolderName?1:-1}},{title:"Employee Name",dataIndex:"employeeName",sorter:function(e,n){return e.employeeName<n.employeeName?1:-1}},{title:"Bank name",dataIndex:"bank.name",sorter:function(e,n){return e.bank.name<n.bank.name?1:-1}},{title:"Branch name",dataIndex:"branch.name",sorter:function(e,n){return e.branch.name<n.branch.name?1:-1}},{title:"Account type",dataIndex:"accountType",sorter:function(e,n){return e.accountType<n.accountType?1:-1}},{title:"Account number",dataIndex:"accountNumber"},{title:"Employee number",dataIndex:"employeeNumber"},{title:"",render:function(e,n){return a.createElement(p.a,{onClick:function(){return t.handleEdit(n)}},"Edit")}}],t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"handleEdit",value:function(e){(0,this.props.onEdit)(e)}},{key:"render",value:function(){var e=this.props,n=e.data,t=e.onSelectionChange,r=n.loading,c=n.users;return a.createElement(H,{bordered:!0,loading:r,rowKey:"id",columns:this.columns,dataSource:c,rowSelection:{onChange:t}})}}]),n}(a.Component),x=Object(d.d)(I)(R),T=t(81),$=t(351),F=t(349),q=t(350),B=function(e){function n(){return Object(l.a)(this,n),Object(i.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),n}(d.b),D=function(e){function n(){return Object(l.a)(this,n),Object(i.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),n}(d.b),M=T.a.Option,V=[{title:"Bank Info"},{title:"Account Info"},{title:"Employee Info"},{title:"Confirm"}],K=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(i.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={curStep:0},t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"next",value:function(){var e=this.state.curStep+1;this.setState({curStep:e})}},{key:"prev",value:function(){var e=this.state.curStep-1;this.setState({curStep:e})}},{key:"render",value:function(){var e=this,n=this.props,t=n.visible,r=n.user,c=n.onOk,o=n.onCancel,l=(n.handleSubmit,n.form.getFieldDecorator),u=this.state.curStep;return a.createElement(B,{query:w},function(n){n.loading;var i=(n.data||{banks:[]}).banks;return a.createElement(D,{query:g},function(n){n.loading;var s=(n.data||{branches:[]}).branches;return a.createElement($.a,{title:r?"Edit User":"Add User",visible:t,onOk:c,onCancel:o},a.createElement(F.a,null,0===u&&a.createElement(a.Fragment,null,a.createElement(F.a.Item,null,l("bank",{initialValue:r&&r.bank&&r.bank.id})(a.createElement(T.a,null,i&&i.map(function(e){return a.createElement(M,{key:e.id,value:e.id},e.name)})))),a.createElement(F.a.Item,null,l("branch",{initialValue:r&&r.branch&&r.branch.id})(a.createElement(T.a,null,s&&s.map(function(e){return a.createElement(M,{key:e.id,value:e.id},e.name)}))))),1===u&&a.createElement(a.Fragment,null,a.createElement(F.a.Item,null,l("accountHolderName",{initialValue:r&&r.accountHolderName})(a.createElement(q.a,{placeholder:"Account Holder Name"}))),a.createElement(F.a.Item,null,l("accountType",{initialValue:r&&r.accountType})(a.createElement(q.a,{placeholder:"Account Type"}))),a.createElement(F.a.Item,null,l("accountNumber",{initialValue:r&&r.accountNumber})(a.createElement(q.a,{placeholder:"Account Number"})))),2===u&&a.createElement(a.Fragment,null,a.createElement(F.a.Item,null,l("employeeName",{initialValue:r&&r.employeeName})(a.createElement(q.a,{placeholder:"Employee Name"}))),a.createElement(F.a.Item,null,l("employeeNumber",{initialValue:r&&r.employeeNumber})(a.createElement(q.a,{placeholder:"Employee Number"})))),3===u&&a.createElement(a.Fragment,null,a.createElement("span",null,r&&r.accountHolderName),a.createElement("span",null,r&&r.accountNumber),a.createElement("span",null,r&&r.accountType),a.createElement("span",null,r&&r.employeeName),a.createElement("span",null,r&&r.employeeNumber),a.createElement("span",null,r&&r.bank),a.createElement("span",null,r&&r.branch)),a.createElement("div",{className:"steps-action"},u<V.length-1&&a.createElement(p.a,{onClick:function(){return e.next()}},"Next"),u>0&&a.createElement(p.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},"Previous"))))})})}}]),n}(a.Component),Q=F.a.create({name:"form_user"})(K),J=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(i.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={selectedRowKeys:[],visibleModal:!1,selectedUser:void 0},t.formRef={},t.onAddUser=function(){t.setState({visibleModal:!0,selectedUser:void 0})},t.onDeleteUsers=function(){var e=t.state.selectedRowKeys;t.props.client.mutate({mutation:A,variables:{ids:e},update:function(e,n){var t=n.data.deleteUsers;e.readQuery({query:I})&&e.writeQuery({query:I,data:{users:t}})}})},t.onEditUser=function(e){t.setState({visibleModal:!0,selectedUser:e})},t.onOk=function(){t.handleSubmit()},t.onCancel=function(){t.setState({visibleModal:!1,selectedUser:void 0})},t.handleSubmit=function(){if(t.formRef.props){var e=t.formRef.props.form;e.validateFields(function(n,a){var r=t.state.selectedUser,c=t.props.client;console.log("Received values of form: ",a),n||(r?c.mutate({mutation:C,variables:{id:r.id,user:a}}).then(function(n){e.resetFields(),t.setState({visibleModal:!1})}):c.mutate({mutation:S,variables:{user:a},update:function(e,n){var t=n.data.addUser,a=e.readQuery({query:I});a&&e.writeQuery({query:I,data:{users:a.users.concat(t)}})}}).then(function(){e.resetFields(),t.setState({visibleModal:!1})}))})}},t.userFormRef=function(e){t.formRef=e},t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this,n=this.state,t=n.visibleModal,r=n.selectedRowKeys,c=n.selectedUser;return a.createElement("div",{className:"App"},a.createElement(p.a,{icon:"plus",onClick:this.onAddUser},"Add User"),a.createElement(p.a,{icon:"delete",disabled:r.length<=0,onClick:this.onDeleteUsers},"Delete User"),a.createElement(x,{onEdit:this.onEditUser,onSelectionChange:function(n){return e.setState({selectedRowKeys:n})}}),a.createElement(Q,{wrappedComponentRef:this.userFormRef,visible:t,user:c,onOk:this.onOk,onCancel:this.onCancel,handleSubmit:this.handleSubmit}))}}]),n}(a.Component),W=Object(d.c)(J),L=new(t(173).a)({uri:"/graphql"}),P=(t(345),function(e){function n(){return Object(l.a)(this,n),Object(i.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(d.a,{client:L},r.a.createElement(W,null))}}]),n}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[176,1,2]]]);
//# sourceMappingURL=main.e8dcaa3b.chunk.js.map