(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,n,t){e.exports=t(347)},181:function(e,n,t){},342:function(e,n,t){},346:function(e,n,t){},347:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),c=t(9),o=t.n(c),i=(t(181),t(31)),u=t(48),l=t(33),s=t(32),m=t(34),d=t(45),b=t(29),f=t(349),p=t(53),h=t(42),v=t.n(h);function y(){var e=Object(p.a)(["\n  mutation deleteUsers($ids: [ID]!) {\n    deleteUsers(ids: $ids) {\n      id\n      accountHolderName\n      employeeName\n      bank {\n        id\n        name\n      }\n      branch {\n        id\n        name\n      }\n      accountType\n      accountNumber\n      employeeNumber\n      lastUpdated\n    }\n  }\n"]);return y=function(){return e},e}function E(){var e=Object(p.a)(["\n  mutation deleteUser($id: ID!) {\n    deleteUser(id: $id) {\n      id\n    }\n  }\n"]);return E=function(){return e},e}function O(){var e=Object(p.a)(["\n  mutation updateUser($id: ID!, $user: BankUserInput!) {\n    updateUser(id: $id, user: $user) {\n      id\n      accountHolderName\n      employeeName\n      bank {\n        id\n        name\n      }\n      branch {\n        id\n        name\n      }\n      accountType\n      accountNumber\n      employeeNumber\n      lastUpdated\n    }\n  }\n"]);return O=function(){return e},e}function N(){var e=Object(p.a)(["\n  mutation addUser($user: BankUserInput!) {\n    addUser(user: $user) {\n      id\n      accountHolderName\n      employeeName\n      bank {\n        id\n        name\n      }\n      branch {\n        id\n        name\n      }\n      accountType\n      accountNumber\n      employeeNumber\n      lastUpdated\n    }\n  }\n"]);return N=function(){return e},e}function j(){var e=Object(p.a)(["\n  {\n    users {\n      id\n      accountHolderName\n      employeeName\n      bank {\n        id\n        name\n      }\n      branch {\n        id\n        name\n      }\n      accountType\n      accountNumber\n      employeeNumber\n      lastUpdated\n    }\n  }\n"]);return j=function(){return e},e}function k(){var e=Object(p.a)(["\n  {\n    branches {\n      id\n      name\n    }\n  }\n"]);return k=function(){return e},e}function U(){var e=Object(p.a)(["\n  {\n    banks {\n      id\n      name\n    }\n  }\n"]);return U=function(){return e},e}var g=v()(U()),w=v()(k()),I=v()(j()),S=v()(N()),C=v()(O()),A=(v()(E()),v()(y())),R=function(e){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),n}(f.a),x=function(e){function n(){var e,t;Object(i.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(t=Object(l.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(c)))).columns=[{title:"Account Holder Name",dataIndex:"accountHolderName",sorter:function(e,n){return e.accountHolderName<n.accountHolderName?1:-1}},{title:"Employee Name",dataIndex:"employeeName",sorter:function(e,n){return e.employeeName<n.employeeName?1:-1}},{title:"Bank name",dataIndex:"bank.name",sorter:function(e,n){return e.bank.name<n.bank.name?1:-1}},{title:"Branch name",dataIndex:"branch.name",sorter:function(e,n){return e.branch.name<n.branch.name?1:-1}},{title:"Account type",dataIndex:"accountType",sorter:function(e,n){return e.accountType<n.accountType?1:-1}},{title:"Account number",dataIndex:"accountNumber"},{title:"Employee number",dataIndex:"employeeNumber"},{title:"",render:function(e,n){return a.createElement(b.a,{onClick:function(){return t.handleEdit(n)}},"Edit")}}],t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"handleEdit",value:function(e){(0,this.props.onEdit)(e)}},{key:"render",value:function(){var e=this.props,n=e.data,t=e.onSelectionChange,r=n.loading,c=n.users;return a.createElement(R,{bordered:!0,loading:r,rowKey:"id",columns:this.columns,dataSource:c,rowSelection:{onChange:t}})}}]),n}(a.Component),F=Object(d.d)(I)(x),H=t(352),$=t(350),T=t(82),D=function(e){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),n}(d.b),q=function(e){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),n}(d.b),B=T.a.Option,M=function(e){var n=e.form,t=e.user,a=n.getFieldDecorator;return r.a.createElement(D,{query:g},function(e){var n=e.data,c=e.loading,o=e.error;if(c||o)return null;var i=(n||{banks:[]}).banks;return r.a.createElement(q,{query:w},function(e){var n=e.data,c=e.loading,o=e.error;if(c||o)return null;var u=(n||{branches:[]}).branches;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a.Item,null,a("bank",{initialValue:t&&t.bank&&t.bank.id})(r.a.createElement(T.a,null,i.map(function(e){return r.a.createElement(B,{key:e.id,value:e.id},e.name)})))),r.a.createElement($.a.Item,null,a("branch",{initialValue:t&&t.branch&&t.branch.id})(r.a.createElement(T.a,null,u.map(function(e){return r.a.createElement(B,{key:e.id,value:e.id},e.name)})))))})})},V=t(351),K=function(e){var n=e.form,t=e.user,a=n.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a.Item,null,a("accountHolderName",{initialValue:t&&t.accountHolderName})(r.a.createElement(V.a,{placeholder:"Account Holder Name"}))),r.a.createElement($.a.Item,null,a("accountType",{initialValue:t&&t.accountType})(r.a.createElement(V.a,{placeholder:"Account Type"}))),r.a.createElement($.a.Item,null,a("accountNumber",{initialValue:t&&t.accountNumber})(r.a.createElement(V.a,{placeholder:"Account Number"}))))},Q=function(e){var n=e.form,t=e.user,a=n.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a.Item,null,a("employeeName",{initialValue:t&&t.employeeName})(r.a.createElement(V.a,{placeholder:"Employee Name"}))),r.a.createElement($.a.Item,null,a("employeeNumber",{initialValue:t&&t.employeeNumber})(r.a.createElement(V.a,{placeholder:"Employee Number"}))))},J=(t(342),function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={curStep:0},t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"next",value:function(){var e=this.state.curStep+1;this.setState({curStep:e})}},{key:"prev",value:function(){var e=this.state.curStep-1;this.setState({curStep:e})}},{key:"render",value:function(){var e=this,n=this.props,t=n.visible,r=n.user,c=n.onOk,o=n.onCancel,i=n.form,u=this.state.curStep,l=[{title:"Bank Info",content:a.createElement(M,{form:i,user:r})},{title:"Account Info",content:a.createElement(K,{form:i,user:r})},{title:"Employee Info",content:a.createElement(Q,{form:i,user:r})}];return a.createElement(H.a,{title:r?"Edit User":"Add User",visible:t,onOk:c,onCancel:o},a.createElement($.a,null,l.map(function(e,n){return a.createElement("div",{key:e.title,className:n===u?"foo fade-in":"foo"},e.content)}),a.createElement("div",{className:"steps-action"},u<l.length-1&&a.createElement(b.a,{onClick:function(){return e.next()}},"Next"),u>0&&a.createElement(b.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},"Previous"))))}}]),n}(a.Component)),W=$.a.create({name:"form_user"})(J),L=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={selectedRowKeys:[],visibleModal:!1,selectedUser:void 0},t.formRef={},t.onAddUser=function(){t.setState({visibleModal:!0,selectedUser:void 0})},t.onDeleteUsers=function(){var e=t.state.selectedRowKeys;t.props.client.mutate({mutation:A,variables:{ids:e},update:function(e,n){var t=n.data.deleteUsers;e.readQuery({query:I})&&e.writeQuery({query:I,data:{users:t}})}})},t.onEditUser=function(e){t.setState({visibleModal:!0,selectedUser:e})},t.onOk=function(){t.handleSubmit()},t.onCancel=function(){t.setState({visibleModal:!1,selectedUser:void 0})},t.handleSubmit=function(){if(t.formRef.props){var e=t.formRef.props.form;e.validateFields(function(n,a){var r=t.state.selectedUser,c=t.props.client;console.log("Received values of form: ",a),n||(r?c.mutate({mutation:C,variables:{id:r.id,user:a}}).then(function(n){e.resetFields(),t.setState({visibleModal:!1})}):c.mutate({mutation:S,variables:{user:a},update:function(e,n){var t=n.data.addUser,a=e.readQuery({query:I});a&&e.writeQuery({query:I,data:{users:a.users.concat(t)}})}}).then(function(){e.resetFields(),t.setState({visibleModal:!1})}))})}},t.userFormRef=function(e){t.formRef=e},t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=this,n=this.state,t=n.visibleModal,r=n.selectedRowKeys,c=n.selectedUser;return a.createElement("div",{className:"App"},a.createElement(b.a,{icon:"plus",onClick:this.onAddUser},"Add User"),a.createElement(b.a,{icon:"delete",disabled:r.length<=0,onClick:this.onDeleteUsers},"Delete User"),a.createElement(F,{onEdit:this.onEditUser,onSelectionChange:function(n){return e.setState({selectedRowKeys:n})}}),a.createElement(W,{wrappedComponentRef:this.userFormRef,visible:t,user:c,onOk:this.onOk,onCancel:this.onCancel,handleSubmit:this.handleSubmit}))}}]),n}(a.Component),P=Object(d.c)(L),_=new(t(173).a)({uri:"/graphql"}),z=(t(346),function(e){function n(){return Object(i.a)(this,n),Object(l.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(d.a,{client:_},r.a.createElement(P,null))}}]),n}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[176,1,2]]]);
//# sourceMappingURL=main.c5113b75.chunk.js.map