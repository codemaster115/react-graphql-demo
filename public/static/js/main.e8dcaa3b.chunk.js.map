{"version":3,"sources":["config/queries.js","components/UserList.tsx","components/Query.tsx","components/UserForm.tsx","pages/Main.tsx","config/graphql.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["GET_BANKS","gql","_templateObject","GET_BRANCHES","_templateObject2","GET_USERS","_templateObject3","ADD_USER","_templateObject4","UPDATE_USER","_templateObject5","DELETE_USERS","_templateObject6","_templateObject7","UserTable","Table","UserList","columns","title","dataIndex","sorter","a","b","accountHolderName","employeeName","bank","name","branch","accountType","render","text","record","react","es_button","onClick","_this","handleEdit","user","onEdit","this","props","_this$props","data","onSelectionChange","loading","users","UserList_UserTable","bordered","rowKey","dataSource","rowSelection","onChange","React","withQuery","BankQuery","Query","BranchQuery","Option","Select","steps","UserForm","state","curStep","setState","_this2","visible","onOk","onCancel","getFieldDecorator","handleSubmit","form","Query_BankQuery","query","_ref","banks","Query_BranchQuery","_ref3","branches","modal","es_form","Item","initialValue","id","es_select","map","key","value","input","placeholder","accountNumber","employeeNumber","className","length","next","style","marginLeft","prev","Form","create","Main","selectedRowKeys","visibleModal","selectedUser","undefined","formRef","onAddUser","onDeleteUsers","ids","client","mutate","mutation","variables","update","cache","deleteUsers","readQuery","writeQuery","onEditUser","validateFields","err","values","console","log","then","res","resetFields","_ref2","addUser","concat","userFormRef","_this$state","icon","disabled","components_UserList","items","components_UserForm","wrappedComponentRef","withApollo","apolloClient","ApolloClient","uri","App","react_default","createElement","react_apollo_esm","pages_Main","Component","Boolean","window","location","hostname","match","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e8dcaa3b.chunk.js","sourcesContent":["import gql from \"graphql-tag\";\r\n\r\nconst GET_BANKS = gql`\r\n  {\r\n    banks {\r\n      id\r\n      name\r\n    }\r\n  }\r\n`;\r\n\r\nconst GET_BRANCHES = gql`\r\n  {\r\n    branches {\r\n      id\r\n      name\r\n    }\r\n  }\r\n`;\r\n\r\nconst GET_USERS = gql`\r\n  {\r\n    users {\r\n      id\r\n      accountHolderName\r\n      employeeName\r\n      bank {\r\n        id\r\n        name\r\n      }\r\n      branch {\r\n        id\r\n        name\r\n      }\r\n      accountType\r\n      accountNumber\r\n      employeeNumber\r\n      lastUpdated\r\n    }\r\n  }\r\n`;\r\n\r\nconst ADD_USER = gql`\r\n  mutation addUser($user: BankUserInput!) {\r\n    addUser(user: $user) {\r\n      id\r\n      accountHolderName\r\n      employeeName\r\n      bank {\r\n        id\r\n        name\r\n      }\r\n      branch {\r\n        id\r\n        name\r\n      }\r\n      accountType\r\n      accountNumber\r\n      employeeNumber\r\n      lastUpdated\r\n    }\r\n  }\r\n`;\r\n\r\nconst UPDATE_USER = gql`\r\n  mutation updateUser($id: ID!, $user: BankUserInput!) {\r\n    updateUser(id: $id, user: $user) {\r\n      id\r\n      accountHolderName\r\n      employeeName\r\n      bank {\r\n        id\r\n        name\r\n      }\r\n      branch {\r\n        id\r\n        name\r\n      }\r\n      accountType\r\n      accountNumber\r\n      employeeNumber\r\n      lastUpdated\r\n    }\r\n  }\r\n`;\r\n\r\nconst DELETE_USER = gql`\r\n  mutation deleteUser($id: ID!) {\r\n    deleteUser(id: $id) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nconst DELETE_USERS = gql`\r\n  mutation deleteUsers($ids: [ID]!) {\r\n    deleteUsers(ids: $ids) {\r\n      id\r\n      accountHolderName\r\n      employeeName\r\n      bank {\r\n        id\r\n        name\r\n      }\r\n      branch {\r\n        id\r\n        name\r\n      }\r\n      accountType\r\n      accountNumber\r\n      employeeNumber\r\n      lastUpdated\r\n    }\r\n  }\r\n`;\r\n\r\nexport {\r\n  GET_BANKS,\r\n  GET_BRANCHES,\r\n  GET_USERS,\r\n  ADD_USER,\r\n  UPDATE_USER,\r\n  DELETE_USER,\r\n  DELETE_USERS\r\n};\r\n","import * as React from \"react\";\r\nimport { withQuery, DataProps } from \"react-apollo\";\r\nimport { Table, Button } from \"antd\";\r\nimport { BankUser } from \"../config/types\";\r\nimport { GET_USERS } from \"../config/queries\";\r\nimport { ColumnProps } from \"antd/lib/table\";\r\n\r\nclass UserTable extends Table<BankUser> {}\r\n\r\ninterface Response {\r\n  users: Array<BankUser>;\r\n}\r\n\r\ninterface OwnProps {\r\n  onEdit: (user: BankUser) => void;\r\n  onSelectionChange: (\r\n    selectedRowKeys: string[] | number[],\r\n    selectedRows: BankUser[]\r\n  ) => void;\r\n}\r\n\r\nclass UserList extends React.Component<OwnProps & DataProps<Response>> {\r\n  columns: ColumnProps<BankUser>[] = [\r\n    {\r\n      title: \"Account Holder Name\",\r\n      dataIndex: \"accountHolderName\",\r\n      sorter: (a, b) => (a.accountHolderName < b.accountHolderName ? 1 : -1)\r\n    },\r\n    {\r\n      title: \"Employee Name\",\r\n      dataIndex: \"employeeName\",\r\n      sorter: (a, b) => (a.employeeName < b.employeeName ? 1 : -1)\r\n    },\r\n    {\r\n      title: \"Bank name\",\r\n      dataIndex: \"bank.name\",\r\n      sorter: (a, b) => (a.bank.name < b.bank.name ? 1 : -1)\r\n    },\r\n    {\r\n      title: \"Branch name\",\r\n      dataIndex: \"branch.name\",\r\n      sorter: (a, b) => (a.branch.name < b.branch.name ? 1 : -1)\r\n    },\r\n    {\r\n      title: \"Account type\",\r\n      dataIndex: \"accountType\",\r\n      sorter: (a, b) => (a.accountType < b.accountType ? 1 : -1)\r\n    },\r\n    {\r\n      title: \"Account number\",\r\n      dataIndex: \"accountNumber\"\r\n    },\r\n    {\r\n      title: \"Employee number\",\r\n      dataIndex: \"employeeNumber\"\r\n    },\r\n    {\r\n      title: \"\",\r\n      render: (text, record) => {\r\n        return <Button onClick={() => this.handleEdit(record)}>Edit</Button>;\r\n      }\r\n    }\r\n  ];\r\n\r\n  handleEdit(user: BankUser) {\r\n    const { onEdit } = this.props;\r\n    onEdit(user);\r\n  }\r\n\r\n  render() {\r\n    const { data, onSelectionChange } = this.props;\r\n    const { loading, users } = data;\r\n\r\n    return (\r\n      <UserTable\r\n        bordered\r\n        loading={loading}\r\n        rowKey=\"id\"\r\n        columns={this.columns}\r\n        dataSource={users}\r\n        rowSelection={{\r\n          onChange: onSelectionChange\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default withQuery<OwnProps, Response, {}, DataProps<Response>>(\r\n  GET_USERS\r\n)(UserList);\r\n","import { Query } from \"react-apollo\";\r\nimport { Bank, Branch } from \"../config/types\";\r\n\r\ninterface BankData {\r\n  banks: Array<Bank>;\r\n}\r\n\r\ninterface BranchData {\r\n  branches: Array<Branch>;\r\n}\r\n\r\nclass BankQuery extends Query<BankData> {}\r\nclass BranchQuery extends Query<BranchData> {}\r\n\r\nexport { BankQuery, BranchQuery };\r\n","import * as React from \"react\";\r\nimport { Modal, Select, Form, Input, Button, message } from \"antd\";\r\nimport { FormComponentProps } from \"antd/lib/form\";\r\nimport { BankQuery, BranchQuery } from \"./Query\";\r\nimport { GET_BANKS, GET_BRANCHES } from \"../config/queries\";\r\nimport { BankUser, BankUserInput } from \"../config/types\";\r\n\r\nconst { Option } = Select;\r\n\r\ninterface IProps extends FormComponentProps<BankUserInput> {\r\n  visible: boolean;\r\n  user?: BankUser;\r\n  onOk: () => void;\r\n  onCancel: () => void;\r\n  handleSubmit: () => void;\r\n}\r\n\r\ninterface IState {\r\n  curStep: number;\r\n}\r\n\r\nconst steps: Array<{ title: string }> = [\r\n  {\r\n    title: \"Bank Info\"\r\n  },\r\n  {\r\n    title: \"Account Info\"\r\n  },\r\n  {\r\n    title: \"Employee Info\"\r\n  },\r\n  {\r\n    title: \"Confirm\"\r\n  }\r\n];\r\n\r\nclass UserForm extends React.Component<IProps, IState> {\r\n  state: IState = {\r\n    curStep: 0\r\n  };\r\n\r\n  next() {\r\n    const curStep = this.state.curStep + 1;\r\n    this.setState({ curStep });\r\n  }\r\n\r\n  prev() {\r\n    const curStep = this.state.curStep - 1;\r\n    this.setState({ curStep });\r\n  }\r\n\r\n  render() {\r\n    const { visible, user, onOk, onCancel, handleSubmit, form } = this.props;\r\n    const { getFieldDecorator } = form;\r\n    const { curStep } = this.state;\r\n\r\n    return (\r\n      <BankQuery query={GET_BANKS}>\r\n        {({ loading, data }) => {\r\n          const { banks } = data || { banks: [] };\r\n          return (\r\n            <BranchQuery query={GET_BRANCHES}>\r\n              {({ loading, data }) => {\r\n                const { branches } = data || { branches: [] };\r\n                return (\r\n                  <Modal\r\n                    title={user ? \"Edit User\" : \"Add User\"}\r\n                    visible={visible}\r\n                    onOk={onOk}\r\n                    onCancel={onCancel}\r\n                  >\r\n                    <Form>\r\n                      {curStep === 0 && (\r\n                        <React.Fragment>\r\n                          <Form.Item>\r\n                            {getFieldDecorator(\"bank\", {\r\n                              initialValue: user && user.bank && user.bank.id\r\n                            })(\r\n                              <Select>\r\n                                {banks &&\r\n                                  banks.map(bank => (\r\n                                    <Option key={bank.id} value={bank.id}>\r\n                                      {bank.name}\r\n                                    </Option>\r\n                                  ))}\r\n                              </Select>\r\n                            )}\r\n                          </Form.Item>\r\n                          <Form.Item>\r\n                            {getFieldDecorator(\"branch\", {\r\n                              initialValue:\r\n                                user && user.branch && user.branch.id\r\n                            })(\r\n                              <Select>\r\n                                {branches &&\r\n                                  branches.map(branch => (\r\n                                    <Option key={branch.id} value={branch.id}>\r\n                                      {branch.name}\r\n                                    </Option>\r\n                                  ))}\r\n                              </Select>\r\n                            )}\r\n                          </Form.Item>\r\n                        </React.Fragment>\r\n                      )}\r\n                      {curStep === 1 && (\r\n                        <React.Fragment>\r\n                          <Form.Item>\r\n                            {getFieldDecorator(\"accountHolderName\", {\r\n                              initialValue: user && user.accountHolderName\r\n                            })(<Input placeholder={\"Account Holder Name\"} />)}\r\n                          </Form.Item>\r\n                          <Form.Item>\r\n                            {getFieldDecorator(\"accountType\", {\r\n                              initialValue: user && user.accountType\r\n                            })(<Input placeholder={\"Account Type\"} />)}\r\n                          </Form.Item>\r\n                          <Form.Item>\r\n                            {getFieldDecorator(\"accountNumber\", {\r\n                              initialValue: user && user.accountNumber\r\n                            })(<Input placeholder={\"Account Number\"} />)}\r\n                          </Form.Item>\r\n                        </React.Fragment>\r\n                      )}\r\n                      {curStep === 2 && (\r\n                        <React.Fragment>\r\n                          <Form.Item>\r\n                            {getFieldDecorator(\"employeeName\", {\r\n                              initialValue: user && user.employeeName\r\n                            })(<Input placeholder={\"Employee Name\"} />)}\r\n                          </Form.Item>\r\n                          <Form.Item>\r\n                            {getFieldDecorator(\"employeeNumber\", {\r\n                              initialValue: user && user.employeeNumber\r\n                            })(<Input placeholder={\"Employee Number\"} />)}\r\n                          </Form.Item>\r\n                        </React.Fragment>\r\n                      )}\r\n                      {curStep === 3 && (\r\n                        <React.Fragment>\r\n                          <span>{user && user.accountHolderName}</span>\r\n                          <span>{user && user.accountNumber}</span>\r\n                          <span>{user && user.accountType}</span>\r\n                          <span>{user && user.employeeName}</span>\r\n                          <span>{user && user.employeeNumber}</span>\r\n                          <span>{user && user.bank}</span>\r\n                          <span>{user && user.branch}</span>\r\n                        </React.Fragment>\r\n                      )}\r\n                      <div className=\"steps-action\">\r\n                        {curStep < steps.length - 1 && (\r\n                          <Button onClick={() => this.next()}>Next</Button>\r\n                        )}\r\n                        {curStep > 0 && (\r\n                          <Button\r\n                            style={{ marginLeft: 8 }}\r\n                            onClick={() => this.prev()}\r\n                          >\r\n                            Previous\r\n                          </Button>\r\n                        )}\r\n                      </div>\r\n                    </Form>\r\n                  </Modal>\r\n                );\r\n              }}\r\n            </BranchQuery>\r\n          );\r\n        }}\r\n      </BankQuery>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Form.create({ name: \"form_user\" })(UserForm);\r\n","import * as React from \"react\";\r\nimport { withApollo, WithApolloClient, Mutation } from \"react-apollo\";\r\nimport { Button } from \"antd\";\r\nimport UserList from \"../components/UserList\";\r\nimport {\r\n  UPDATE_USER,\r\n  DELETE_USERS,\r\n  ADD_USER,\r\n  GET_USERS\r\n} from \"../config/queries\";\r\nimport UserForm from \"../components/UserForm\";\r\nimport { BankUser, BankUserInput } from \"../config/types\";\r\nimport { FormComponentProps } from \"antd/lib/form\";\r\n\r\ninterface IProps {}\r\ninterface IState {\r\n  selectedRowKeys: string[] | number[];\r\n  visibleModal: boolean;\r\n  selectedUser?: BankUser;\r\n}\r\n\r\nclass Main extends React.Component<WithApolloClient<IProps>, IState> {\r\n  state: IState = {\r\n    selectedRowKeys: [],\r\n    visibleModal: false,\r\n    selectedUser: undefined\r\n  };\r\n\r\n  formRef: {\r\n    props?: FormComponentProps<BankUserInput>;\r\n  } = {};\r\n\r\n  onAddUser = () => {\r\n    this.setState({\r\n      visibleModal: true,\r\n      selectedUser: undefined\r\n    });\r\n  };\r\n\r\n  onDeleteUsers = () => {\r\n    const { selectedRowKeys: ids } = this.state;\r\n    const { client } = this.props;\r\n\r\n    client.mutate({\r\n      mutation: DELETE_USERS,\r\n      variables: { ids },\r\n      update: (cache, { data: { deleteUsers } }) => {\r\n        const data = cache.readQuery<{ users: BankUser[] }>({\r\n          query: GET_USERS\r\n        });\r\n        if (data) {\r\n          cache.writeQuery({\r\n            query: GET_USERS,\r\n            data: {\r\n              users: deleteUsers\r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  onEditUser = (user: BankUser) => {\r\n    this.setState({\r\n      visibleModal: true,\r\n      selectedUser: user\r\n    });\r\n  };\r\n\r\n  onOk = () => {\r\n    this.handleSubmit();\r\n  };\r\n\r\n  onCancel = () => {\r\n    this.setState({\r\n      visibleModal: false,\r\n      selectedUser: undefined\r\n    });\r\n  };\r\n\r\n  handleSubmit = () => {\r\n    if (this.formRef.props) {\r\n      const form = this.formRef.props.form;\r\n      form.validateFields((err, values) => {\r\n        const { selectedUser } = this.state;\r\n        const { client } = this.props;\r\n        console.log(\"Received values of form: \", values);\r\n        if (err) {\r\n          return;\r\n        }\r\n\r\n        if (!selectedUser) {\r\n          client\r\n            .mutate({\r\n              mutation: ADD_USER,\r\n              variables: { user: values },\r\n              update: (cache, { data: { addUser } }) => {\r\n                const data = cache.readQuery<{ users: BankUser[] }>({\r\n                  query: GET_USERS\r\n                });\r\n                if (data) {\r\n                  cache.writeQuery({\r\n                    query: GET_USERS,\r\n                    data: {\r\n                      users: data.users.concat(addUser)\r\n                    }\r\n                  });\r\n                }\r\n              }\r\n            })\r\n            .then(() => {\r\n              form.resetFields();\r\n              this.setState({ visibleModal: false });\r\n            });\r\n        } else {\r\n          client\r\n            .mutate({\r\n              mutation: UPDATE_USER,\r\n              variables: { id: selectedUser.id, user: values }\r\n            })\r\n            .then(res => {\r\n              form.resetFields();\r\n              this.setState({ visibleModal: false });\r\n            });\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  userFormRef = (formRef: { props: FormComponentProps<BankUserInput> }) => {\r\n    this.formRef = formRef;\r\n  };\r\n\r\n  render() {\r\n    const { visibleModal, selectedRowKeys, selectedUser } = this.state;\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <Button icon=\"plus\" onClick={this.onAddUser}>\r\n          Add User\r\n        </Button>\r\n        <Button\r\n          icon=\"delete\"\r\n          disabled={selectedRowKeys.length <= 0}\r\n          onClick={this.onDeleteUsers}\r\n        >\r\n          Delete User\r\n        </Button>\r\n        <UserList\r\n          onEdit={this.onEditUser}\r\n          onSelectionChange={items => this.setState({ selectedRowKeys: items })}\r\n        />\r\n        <UserForm\r\n          wrappedComponentRef={this.userFormRef}\r\n          visible={visibleModal}\r\n          user={selectedUser}\r\n          onOk={this.onOk}\r\n          onCancel={this.onCancel}\r\n          handleSubmit={this.handleSubmit}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withApollo(Main);\r\n","import ApolloClient from 'apollo-boost';\r\n\r\nconst apolloClient = new ApolloClient({\r\n  uri: \"/graphql\"\r\n});\r\n\r\nexport {\r\n  apolloClient\r\n};","import React, { Component } from \"react\";\nimport { ApolloProvider } from \"react-apollo\";\n\nimport Main from \"./pages/Main\";\nimport { apolloClient } from \"./config/graphql\";\nimport \"./App.css\";\n\nclass App extends Component {\n  render() {\n    return (\n      <ApolloProvider client={apolloClient}>\n        <Main />\n      </ApolloProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}