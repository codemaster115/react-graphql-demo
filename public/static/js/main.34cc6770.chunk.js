(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{177:function(e,n,t){e.exports=t(348)},182:function(e,n,t){},343:function(e,n,t){},347:function(e,n,t){},348:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),c=t(9),o=t.n(c),u=(t(182),t(31)),i=t(48),l=t(33),s=t(32),m=t(34),d=t(45),f=t(29),p=t(174),b=t(350),h=t(352),y=t(12),v=t(53),E=t(42),N=t.n(E);function O(){var e=Object(v.a)(["\n  mutation deleteUsers($ids: [ID]!) {\n    deleteUsers(ids: $ids) {\n      id\n      accountHolderName\n      employeeName\n      bank {\n        id\n        name\n      }\n      branch {\n        id\n        name\n      }\n      accountType\n      accountNumber\n      employeeNumber\n      lastUpdated\n    }\n  }\n"]);return O=function(){return e},e}function k(){var e=Object(v.a)(["\n  mutation deleteUser($id: ID!) {\n    deleteUser(id: $id) {\n      id\n    }\n  }\n"]);return k=function(){return e},e}function j(){var e=Object(v.a)(["\n  mutation updateUser($id: ID!, $user: BankUserInput!) {\n    updateUser(id: $id, user: $user) {\n      id\n      accountHolderName\n      employeeName\n      bank {\n        id\n        name\n      }\n      branch {\n        id\n        name\n      }\n      accountType\n      accountNumber\n      employeeNumber\n      lastUpdated\n    }\n  }\n"]);return j=function(){return e},e}function g(){var e=Object(v.a)(["\n  mutation addUser($user: BankUserInput!) {\n    addUser(user: $user) {\n      id\n      accountHolderName\n      employeeName\n      bank {\n        id\n        name\n      }\n      branch {\n        id\n        name\n      }\n      accountType\n      accountNumber\n      employeeNumber\n      lastUpdated\n    }\n  }\n"]);return g=function(){return e},e}function S(){var e=Object(v.a)(["\n  {\n    users {\n      id\n      accountHolderName\n      employeeName\n      bank {\n        id\n        name\n      }\n      branch {\n        id\n        name\n      }\n      accountType\n      accountNumber\n      employeeNumber\n      lastUpdated\n    }\n  }\n"]);return S=function(){return e},e}function U(){var e=Object(v.a)(["\n  {\n    branches {\n      id\n      name\n    }\n  }\n"]);return U=function(){return e},e}function w(){var e=Object(v.a)(["\n  {\n    banks {\n      id\n      name\n    }\n  }\n"]);return w=function(){return e},e}var I=N()(w()),C=N()(U()),x=N()(S()),A=N()(g()),F=N()(j()),R=(N()(k()),N()(O())),T=function(e){function n(){return Object(u.a)(this,n),Object(l.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),n}(b.a),D=function(e){function n(){var e,t;Object(u.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(t=Object(l.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(c)))).columns=[{title:"Account Holder Name",dataIndex:"accountHolderName",sorter:function(e,n){return e.accountHolderName<n.accountHolderName?1:-1}},{title:"Employee Name",dataIndex:"employeeName",sorter:function(e,n){return e.employeeName<n.employeeName?1:-1}},{title:"Bank name",dataIndex:"bank.name",sorter:function(e,n){return e.bank.name<n.bank.name?1:-1}},{title:"Branch name",dataIndex:"branch.name",sorter:function(e,n){return e.branch.name<n.branch.name?1:-1}},{title:"Account type",dataIndex:"accountType",sorter:function(e,n){return e.accountType<n.accountType?1:-1}},{title:"Account number",dataIndex:"accountNumber"},{title:"Employee number",dataIndex:"employeeNumber"},{title:"",render:function(e,n){return a.createElement(f.a,{onClick:function(){return t.handleEdit(n)}},"Edit")}}],t.searchInput=null,t.getColumnSearchProps=function(e){if(e)return{filterDropdown:function(n){var r=n.setSelectedKeys,c=n.selectedKeys,o=n.confirm,u=n.clearFilters;return a.createElement("div",{style:{padding:8}},a.createElement(h.a.Search,{ref:function(e){t.searchInput=e},placeholder:"Search ".concat(e),onSearch:function(){return t.handleSearch(c,o)},value:c[0],onChange:function(e){return r(e.target.value?[e.target.value]:[])},style:{width:188,marginBottom:8,display:"block"}}),a.createElement(f.a,{onClick:function(){return t.handleReset(u)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return a.createElement(y.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(n,t){return t[e].toString().toLowerCase().includes(n.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return t.searchInput&&t.searchInput.focus()})}}},t.handleSearch=function(e,n){n(),t.setState({searchText:e[0]})},t.handleReset=function(e){e(),t.setState({searchText:""})},t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"handleEdit",value:function(e){(0,this.props.onEdit)(e)}},{key:"render",value:function(){var e=this,n=this.props,t=n.data,r=n.onSelectionChange,c=t.loading,o=t.users,u=this.columns.map(function(n){return Object(p.a)({},n,e.getColumnSearchProps(n.dataIndex||""))});return a.createElement(T,{bordered:!0,loading:c,rowKey:"id",columns:u,dataSource:o,rowSelection:{onChange:r}})}}]),n}(a.Component),H=Object(d.d)(x)(D),$=t(353),B=t(351),V=t(82),q=function(e){function n(){return Object(u.a)(this,n),Object(l.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),n}(d.b),K=function(e){function n(){return Object(u.a)(this,n),Object(l.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),n}(d.b),M=V.a.Option,Q=function(e){var n=e.form,t=e.user,a=n.getFieldDecorator;return r.a.createElement(q,{query:I},function(e){var n=e.data,c=e.loading,o=e.error;if(c||o)return null;var u=(n||{banks:[]}).banks;return r.a.createElement(K,{query:C},function(e){var n=e.data,c=e.loading,o=e.error;if(c||o)return null;var i=(n||{branches:[]}).branches;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a.Item,null,a("bank",{initialValue:t&&t.bank&&t.bank.id})(r.a.createElement(V.a,null,u.map(function(e){return r.a.createElement(M,{key:e.id,value:e.id},e.name)})))),r.a.createElement(B.a.Item,null,a("branch",{initialValue:t&&t.branch&&t.branch.id})(r.a.createElement(V.a,null,i.map(function(e){return r.a.createElement(M,{key:e.id,value:e.id},e.name)})))))})})},L=function(e){var n=e.form,t=e.user,a=n.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a.Item,null,a("accountHolderName",{initialValue:t&&t.accountHolderName})(r.a.createElement(h.a,{placeholder:"Account Holder Name"}))),r.a.createElement(B.a.Item,null,a("accountType",{initialValue:t&&t.accountType})(r.a.createElement(h.a,{placeholder:"Account Type"}))),r.a.createElement(B.a.Item,null,a("accountNumber",{initialValue:t&&t.accountNumber,rules:[{max:7}]})(r.a.createElement(h.a,{placeholder:"Account Number"}))))},P=function(e){var n=e.form,t=e.user,a=n.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a.Item,null,a("employeeName",{initialValue:t&&t.employeeName})(r.a.createElement(h.a,{placeholder:"Employee Name"}))),r.a.createElement(B.a.Item,null,a("employeeNumber",{initialValue:t&&t.employeeNumber,rules:[{max:15}]})(r.a.createElement(h.a,{placeholder:"Employee Number"}))))},J=(t(343),function(e){function n(){var e,t;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={curStep:0},t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"next",value:function(){var e=this.state.curStep+1;this.setState({curStep:e})}},{key:"prev",value:function(){var e=this.state.curStep-1;this.setState({curStep:e})}},{key:"render",value:function(){var e=this,n=this.props,t=n.visible,r=n.user,c=n.onOk,o=n.onCancel,u=n.form,i=this.state.curStep,l=[{title:"Bank Info",content:a.createElement(Q,{form:u,user:r})},{title:"Account Info",content:a.createElement(L,{form:u,user:r})},{title:"Employee Info",content:a.createElement(P,{form:u,user:r})}];return a.createElement($.a,{title:r?"Edit User":"Add User",visible:t,onOk:c,onCancel:o},a.createElement(B.a,null,l.map(function(e,n){return a.createElement("div",{key:e.title,className:n===i?"foo fade-in":"foo"},e.content)}),a.createElement("div",{className:"steps-action"},i<l.length-1&&a.createElement(f.a,{onClick:function(){return e.next()}},"Next"),i>0&&a.createElement(f.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},"Previous"))))}}]),n}(a.Component)),W=B.a.create({name:"form_user"})(J),z=function(e){function n(){var e,t;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={selectedRowKeys:[],visibleModal:!1,selectedUser:void 0},t.formRef={},t.onAddUser=function(){t.setState({visibleModal:!0,selectedUser:void 0})},t.onDeleteUsers=function(){var e=t.state.selectedRowKeys;t.props.client.mutate({mutation:R,variables:{ids:e},update:function(e,n){var t=n.data.deleteUsers;e.readQuery({query:x})&&e.writeQuery({query:x,data:{users:t}})}})},t.onEditUser=function(e){t.setState({visibleModal:!0,selectedUser:e})},t.onOk=function(){t.handleSubmit()},t.onCancel=function(){t.setState({visibleModal:!1,selectedUser:void 0})},t.handleSubmit=function(){if(t.formRef.props){var e=t.formRef.props.form;e.validateFields(function(n,a){var r=t.state.selectedUser,c=t.props.client;n||(a.accountNumber&&(a.accountNumber=a.accountNumber.replace(/\d+/g,function(e){return"0".repeat(7).substr(e.length)+e})),a.employeeNumber&&(a.employeeNumber=a.employeeNumber.replace(/\d+/g,function(e){return"0".repeat(15).substr(e.length)+e})),r?c.mutate({mutation:F,variables:{id:r.id,user:a}}).then(function(n){e.resetFields(),t.setState({visibleModal:!1})}):c.mutate({mutation:A,variables:{user:a},update:function(e,n){var t=n.data.addUser,a=e.readQuery({query:x});a&&e.writeQuery({query:x,data:{users:a.users.concat(t)}})}}).then(function(){e.resetFields(),t.setState({visibleModal:!1})}))})}},t.userFormRef=function(e){t.formRef=e},t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this,n=this.state,t=n.visibleModal,r=n.selectedRowKeys,c=n.selectedUser;return a.createElement("div",{className:"App"},a.createElement(f.a,{icon:"plus",onClick:this.onAddUser},"Add User"),a.createElement(f.a,{icon:"delete",disabled:r.length<=0,onClick:this.onDeleteUsers},"Delete User"),a.createElement(H,{onEdit:this.onEditUser,onSelectionChange:function(n){return e.setState({selectedRowKeys:n})}}),a.createElement(W,{wrappedComponentRef:this.userFormRef,visible:t,user:c,onOk:this.onOk,onCancel:this.onCancel,handleSubmit:this.handleSubmit}))}}]),n}(a.Component),_=Object(d.c)(z),G=new(t(173).a)({uri:"/graphql"}),X=(t(347),function(e){function n(){return Object(u.a)(this,n),Object(l.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(d.a,{client:G},r.a.createElement(_,null))}}]),n}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[177,1,2]]]);
//# sourceMappingURL=main.34cc6770.chunk.js.map